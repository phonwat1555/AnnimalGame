<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡πÄ‡∏Å‡∏°‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÇ‡∏•‡∏Å‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Sarabun -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700;800&display=swap" rel="stylesheet">

    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ó‡∏±‡πâ‡∏á‡πÉ‡∏ö */
            font-family: 'Sarabun', sans-serif;
            touch-action: none; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡πà‡∏≠‡∏Ç‡∏¢‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏¥‡πâ‡∏ß */
            -webkit-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
            overscroll-behavior: none; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÄ‡∏î‡πâ‡∏á‡∏î‡∏∂‡πã‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏ö */
        }
        
        #root {
            width: 100%;
            height: 100%;
        }

        /* Animations */
        @keyframes bounce-slow { 0%, 100% { transform: translateY(-5%); } 50% { transform: translateY(5%); } }
        @keyframes spin-slow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes pop-in { 0% { transform: scale(0); opacity: 0; } 80% { transform: scale(1.1); } 100% { transform: scale(1); opacity: 1; } }
        @keyframes wiggle { 0%, 100% { transform: rotate(-6deg); } 50% { transform: rotate(6deg); } }
        @keyframes fall { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(360deg); opacity: 0; } }
        @keyframes bounce-in { 0% { transform: scale(0.3); opacity: 0; } 50% { transform: scale(1.05); opacity: 1; } 70% { transform: scale(0.9); } 100% { transform: scale(1); } }
        
        .animate-bounce-slow { animation: bounce-slow 3s infinite ease-in-out; }
        .animate-spin-slow { animation: spin-slow 8s linear infinite; }
        .animate-pop-in { animation: pop-in 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        .animate-wiggle { animation: wiggle 0.4s ease-in-out infinite; }
        .animate-fall { animation: fall linear forwards; }
        .animate-bounce-in { animation: bounce-in 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards; }

        /* Custom Scrollbar for animal list */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.05);
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(0,0,0,0.2);
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;

        // --- Icons (SVG Components) ---
        const IconSparkles = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5h4"/><path d="M19 15v4"/><path d="M15 17h4"/><path d="M15 7h.01"/><path d="M7 17h.01"/></svg>
        );
        const IconTrophy = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>
        );
        const IconRotateCcw = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
        );
        const IconVolume2 = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/></svg>
        );
        const IconVolumeX = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><line x1="23" x2="17" y1="9" y2="15"/><line x1="17" x2="23" y1="9" y2="15"/></svg>
        );
        const IconMusic = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>
        );
        const IconMusic2 = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="8" cy="18" r="4"/><path d="M12 18V2l7 4"/></svg>
        );

        // --- Data & Sounds ---
        const SOUNDS = {
            correct: "data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbqWEzM2Sfv8zDyGFAREZwn8fKw21KSEhun8fKw21KSEhun8fKw21KSEhun8fKw21KSEhugIqF", 
            wrong: "data:audio/wav;base64,UklGRiIGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQYGAACam5uCg4KJjI2WlZSSkI+Qj4+RkpGSkI+Qj4+RkpGSkI+Qj4+RkpGSkI+Qj4+RkpGSkI+Qj4+RkpGSkI+Qj4+RkpGSkI+Qj4+RkpCT",
            start: "data:audio/wav;base64,UklGRjIGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YRIQAACAgYKEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AA==",
            win: "data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbqWEzM2Sfv8zDyGFAREZwn8fKw21KSEhun8fKw21KSEhun8fKw21KSEhun8fKw21KSEhugIqF"
        };

        const CATEGORIES = [
            { id: 'water', name: '‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ô‡πâ‡∏≥', color: 'bg-gradient-to-br from-blue-300 to-blue-400', borderColor: 'border-blue-500', textColor: 'text-blue-900', icon: 'üêü' },
            { id: 'land', name: '‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ö‡∏Å', color: 'bg-gradient-to-br from-green-300 to-green-400', borderColor: 'border-green-500', textColor: 'text-green-900', icon: 'üêò' },
            { id: 'reptile', name: '‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏∑‡πâ‡∏≠‡∏¢‡∏Ñ‡∏•‡∏≤‡∏ô', color: 'bg-gradient-to-br from-orange-300 to-orange-400', borderColor: 'border-orange-500', textColor: 'text-orange-900', icon: 'ü¶é' },
            { id: 'winged', name: '‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏õ‡∏µ‡∏Å', color: 'bg-gradient-to-br from-pink-300 to-pink-400', borderColor: 'border-pink-500', textColor: 'text-pink-900', icon: 'ü¶ã' },
        ];

        const ANIMALS_DATA = [
            { id: 'w1', name: '‡∏õ‡∏π', category: 'water', src: 'https://img2.pic.in.th/pic/5d7beae4ee6af6747.png' },
            { id: 'w2', name: '‡∏´‡∏≠‡∏¢', category: 'water', src: 'https://img5.pic.in.th/file/secure-sv1/3bc573c9bb833512a.png' },
            { id: 'w3', name: '‡∏õ‡∏•‡∏≤', category: 'water', src: 'https://img2.pic.in.th/pic/2215b8e7aff998e18.png' },
            { id: 'w4', name: '‡∏Å‡∏∏‡πâ‡∏á', category: 'water', src: 'https://img2.pic.in.th/pic/40aafd240477916f7.png' },
            { id: 'l1', name: '‡∏ä‡πâ‡∏≤‡∏á', category: 'land', src: 'https://img5.pic.in.th/file/secure-sv1/121c740a3a6afb93f1.png' },
            { id: 'l2', name: '‡∏Å‡∏£‡∏∞‡∏ï‡πà‡∏≤‡∏¢', category: 'land', src: 'https://img5.pic.in.th/file/secure-sv1/13215b8ff2c0dbceba.png' },
            { id: 'l3', name: '‡πÅ‡∏°‡∏ß', category: 'land', src: 'https://img2.pic.in.th/pic/143c965a970965c27c.png' },
            { id: 'l4', name: '‡∏™‡∏∏‡∏ô‡∏±‡∏Ç', category: 'land', src: 'https://img5.pic.in.th/file/secure-sv1/15788d8bd3ba727e5b.png' },
            { id: 'r1', name: '‡∏á‡∏π', category: 'reptile', src: 'https://img2.pic.in.th/pic/snapedit_1764731201634-Photoroom.png' },
            { id: 'r2', name: '‡πÄ‡∏ï‡πà‡∏≤', category: 'reptile', src: 'https://img2.pic.in.th/pic/snapedit_1764731213063-Photoroom.png' },
            { id: 'r3', name: '‡∏à‡∏£‡∏∞‡πÄ‡∏Ç‡πâ', category: 'reptile', src: 'https://img5.pic.in.th/file/secure-sv1/BeautyPlus-Image-Enhancer-1764731271403-Photoroom.png' },
            { id: 'r4', name: '‡∏Å‡∏¥‡πâ‡∏á‡∏Å‡πà‡∏≤', category: 'reptile', src: 'https://img2.pic.in.th/pic/BeautyPlus-Image-Enhancer-1764731288459-Photoroom.png' },
            { id: 'wi1', name: '‡πÑ‡∏Å‡πà', category: 'winged', src: 'https://img5.pic.in.th/file/secure-sv1/upscalemedia-transformed-2ead81fa8123cba6e.png' },
            { id: 'wi2', name: '‡∏ô‡∏Å', category: 'winged', src: 'https://img2.pic.in.th/pic/upscalemedia-transformed-18f37512dcb643091.png' },
            { id: 'wi3', name: '‡πÄ‡∏õ‡πá‡∏î', category: 'winged', src: 'https://img5.pic.in.th/file/secure-sv1/upscalemedia-transformed-36d0d1bc7b6103014.png' },
            { id: 'wi4', name: '‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠', category: 'winged', src: 'https://img2.pic.in.th/pic/upscalemedia-transformed-4.png' },
        ];

        const shuffle = (array) => [...array].sort(() => Math.random() - 0.5);

        // --- Audio Logic ---
        class MusicSynthesizer {
            constructor() {
                this.ctx = null;
                this.isPlaying = false;
                this.tempo = 180;
                this.oscillatorType = 'triangle';
                this.sequence = 0;
                this.timeoutId = null;
            }
            init() { if (!this.ctx) this.ctx = new (window.AudioContext || window.webkitAudioContext)(); }
            playNote(freq, duration, time) {
                if (!this.ctx) return;
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                osc.type = this.oscillatorType;
                osc.frequency.setValueAtTime(freq, time);
                gain.gain.setValueAtTime(0.05, time);
                gain.gain.exponentialRampToValueAtTime(0.001, time + duration - 0.05);
                osc.connect(gain);
                gain.connect(this.ctx.destination);
                osc.start(time);
                osc.stop(time + duration);
            }
            start() {
                this.init();
                if (this.isPlaying || !this.ctx) return;
                if (this.ctx.state === 'suspended') this.ctx.resume();
                this.isPlaying = true;
                this.scheduleNextNote();
            }
            stop() { this.isPlaying = false; clearTimeout(this.timeoutId); }
            scheduleNextNote() {
                if (!this.isPlaying || !this.ctx) return;
                const time = this.ctx.currentTime;
                const melody = [523.25, 0, 659.25, 0, 783.99, 0, 1046.50, 783.99, 0, 659.25, 0, 523.25, 0, 0, 587.33, 0, 587.33, 0, 698.46, 0, 880.00, 783.99, 0, 659.25, 0, 523.25, 0, 0];
                const freq = melody[this.sequence % melody.length];
                if (freq > 0) this.playNote(freq, 0.2, time);
                this.sequence++;
                this.timeoutId = setTimeout(() => this.scheduleNextNote(), (60 / this.tempo) * 1000);
            }
        }

        const bgmSynth = new MusicSynthesizer();
        const playSFX = (type) => { try { const audio = new Audio(SOUNDS[type]); audio.volume = 0.6; audio.play().catch(() => {}); } catch (e) {} };

        // --- Game Component ---
        function CuteAnimalsGame() {
            const [gameState, setGameState] = useState('start');
            const [animals, setAnimals] = useState([]);
            const [completedCount, setCompletedCount] = useState(0);
            const [feedback, setFeedback] = useState(null);
            const [draggedItem, setDraggedItem] = useState(null);
            const [dragPosition, setDragPosition] = useState({ x: 0, y: 0 });
            const [sfxEnabled, setSfxEnabled] = useState(true);
            const [musicEnabled, setMusicEnabled] = useState(false);
            const basketsRef = useRef({});

            useEffect(() => {
                if (musicEnabled && gameState === 'playing') bgmSynth.start();
                else bgmSynth.stop();
                return () => bgmSynth.stop();
            }, [musicEnabled, gameState]);

            const toggleMusic = () => setMusicEnabled(!musicEnabled);
            const speakName = useCallback((text) => {
                if (!sfxEnabled) return;
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'th-TH';
                utterance.rate = 0.8;
                const voices = window.speechSynthesis.getVoices();
                const thaiVoice = voices.find(v => v.lang.includes('th'));
                if (thaiVoice) utterance.voice = thaiVoice;
                window.speechSynthesis.speak(utterance);
            }, [sfxEnabled]);

            const startGame = () => {
                setAnimals(shuffle(ANIMALS_DATA).map(a => ({ ...a, completed: false })));
                setCompletedCount(0);
                setGameState('playing');
                setFeedback(null);
                if (sfxEnabled) playSFX('start');
                if (!musicEnabled) setMusicEnabled(true);
            };

            const handlePointerDown = (e, animal) => {
                if (animal.completed) return;
                speakName(animal.name);
                e.preventDefault();
                e.stopPropagation();
                e.currentTarget.setPointerCapture(e.pointerId); // Key for touch drag
                
                const rect = e.currentTarget.getBoundingClientRect();
                const isTouch = e.pointerType === 'touch';
                let offsetX = e.clientX - rect.left;
                let offsetY = e.clientY - rect.top;

                // Move visual up for touch so finger doesn't hide it
                if (isTouch) {
                    offsetX = rect.width / 2;
                    offsetY = rect.height * 1.5;
                }

                setDraggedItem({ ...animal, offsetX, offsetY });
                setDragPosition({ x: e.clientX, y: e.clientY });
            };

            const handlePointerMove = (e) => {
                if (!draggedItem) return;
                e.preventDefault();
                setDragPosition({ x: e.clientX, y: e.clientY });
            };

            const handlePointerUp = (e) => {
                if (!draggedItem) return;
                e.preventDefault();
                const dropX = e.clientX;
                const dropY = e.clientY;
                let droppedCategory = null;

                Object.keys(basketsRef.current).forEach(key => {
                    const basket = basketsRef.current[key];
                    if (basket) {
                        const rect = basket.getBoundingClientRect();
                        if (dropX >= rect.left && dropX <= rect.right && dropY >= rect.top && dropY <= rect.bottom) {
                            droppedCategory = key;
                        }
                    }
                });

                if (droppedCategory) {
                    if (droppedCategory === draggedItem.category) handleCorrectDrop(draggedItem.id);
                    else handleWrongDrop();
                }
                setDraggedItem(null);
            };

            const handleCorrectDrop = (id) => {
                if (sfxEnabled) playSFX('win');
                speakName('‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å‡πÜ‡πÜ');
                setFeedback({ type: 'correct', msg: '‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å‡πÜ‡πÜ' });
                setAnimals(prev => prev.map(a => a.id === id ? { ...a, completed: true } : a));
                setCompletedCount(prev => {
                    const newCount = prev + 1;
                    if (newCount === ANIMALS_DATA.length) {
                        setTimeout(() => { setGameState('won'); if(sfxEnabled) playSFX('win'); }, 1000);
                    }
                    return newCount;
                });
                setTimeout(() => setFeedback(null), 1500);
            };

            const handleWrongDrop = () => {
                if (sfxEnabled) playSFX('wrong');
                setFeedback({ type: 'wrong', msg: '‡∏≠‡∏∏‡πä‡∏¢! ‡∏ú‡∏¥‡∏î‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡∏∞ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞' });
                setTimeout(() => setFeedback(null), 1500);
            };

            if (gameState === 'start') {
                return (
                    <div className="relative w-full h-full bg-cover bg-center overflow-hidden flex flex-col items-center justify-center font-sarabun touch-none">
                        <div className="absolute inset-0 z-0" style={{ backgroundImage: `url('https://img2.pic.in.th/pic/Gemini_Generated_Image_dt996idt996idt99.png')`, backgroundSize: 'cover', backgroundPosition: 'center', filter: 'brightness(0.9)' }} />
                        <div className="relative z-10 flex flex-col items-center animate-fade-in text-center p-4">
                            <img src="https://img2.pic.in.th/pic/Gemini_Generated_Image_r6w4wzr6w4wzr6w4-Photoroom.png" alt="‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÇ‡∏•‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏±‡∏Å" className="max-w-[90%] w-[300px] md:w-[500px] mb-8 drop-shadow-2xl animate-bounce-slow" />
                            <button onClick={startGame} className="group relative bg-yellow-400 hover:bg-yellow-300 text-yellow-900 font-black text-2xl md:text-5xl py-4 px-8 md:py-6 md:px-12 rounded-full border-b-8 border-yellow-600 active:border-b-0 active:translate-y-2 transition-all shadow-xl transform hover:scale-105">
                                <span className="flex items-center gap-3"><span className="animate-spin-slow text-2xl md:text-4xl">üåü</span> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° <span className="animate-spin-slow text-2xl md:text-4xl">üåü</span></span>
                            </button>
                        </div>
                    </div>
                );
            }

            if (gameState === 'won') {
                return (
                    <div className="w-full h-full bg-gradient-to-b from-blue-300 to-purple-400 flex flex-col items-center justify-center p-4 relative overflow-hidden font-sarabun touch-none">
                        {[...Array(20)].map((_, i) => (
                            <div key={i} className="absolute animate-fall" style={{ left: `${Math.random() * 100}%`, top: `-10%`, animationDuration: `${Math.random() * 3 + 2}s`, animationDelay: `${Math.random() * 2}s`, fontSize: `${Math.random() * 20 + 20}px` }}>{['üéâ', '‚≠ê', 'üéà', 'ü¶Å'][Math.floor(Math.random() * 4)]}</div>
                        ))}
                        <div className="bg-white/90 backdrop-blur-sm p-8 rounded-3xl shadow-2xl text-center max-w-lg w-full z-10 border-4 border-yellow-400">
                            <div className="flex justify-center mb-4"><IconTrophy size={64} className="text-yellow-500 animate-bounce" /></div>
                            <h2 className="text-3xl md:text-5xl font-black text-purple-600 mb-4">‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å‡πÄ‡∏•‡∏¢!</h2>
                            <div className="flex justify-center mb-6"><span className="text-4xl md:text-6xl animate-bounce">üêò</span><span className="text-4xl md:text-6xl animate-bounce delay-100">ü¶ã</span><span className="text-4xl md:text-6xl animate-bounce delay-200">üêü</span></div>
                            <button onClick={startGame} className="flex items-center justify-center gap-2 w-full bg-green-500 hover:bg-green-400 text-white font-bold text-xl md:text-2xl py-3 md:py-4 rounded-xl shadow-lg border-b-4 border-green-700 active:border-b-0 active:translate-y-1 transition-all">
                                <IconRotateCcw /> ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                            </button>
                        </div>
                    </div>
                );
            }

            const remainingAnimals = animals.filter(a => !a.completed);

            return (
                <div className="w-full h-full bg-gradient-to-b from-sky-50 to-blue-100 flex flex-col overflow-hidden touch-none select-none font-sarabun fixed inset-0"
                    onPointerMove={handlePointerMove} onPointerUp={handlePointerUp} onPointerCancel={handlePointerUp} onContextMenu={(e) => e.preventDefault()}>
                    
                    {/* Header: Fixed Height */}
                    <div className="bg-white/90 backdrop-blur-sm p-2 shadow-md flex justify-between items-center z-20 shrink-0 h-14 md:h-16">
                        <h1 className="text-lg md:text-xl font-black text-blue-600 flex items-center gap-1 md:gap-2">ü¶Å <span className="hidden md:inline">‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÇ‡∏•‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏±‡∏Å</span></h1>
                        <div className="flex gap-2 md:gap-4 items-center">
                            <div className="px-3 md:px-4 py-1 bg-yellow-100 rounded-full text-yellow-800 font-bold border-2 border-yellow-400 flex items-center text-sm md:text-base">‚≠ê {completedCount} / 16</div>
                            <div className="flex gap-1 bg-gray-100 p-1 rounded-full border border-gray-300">
                                <button onClick={toggleMusic} className={`p-2 rounded-full transition-colors ${musicEnabled ? 'bg-purple-100 text-purple-600' : 'bg-gray-200 text-gray-400'}`}>{musicEnabled ? <IconMusic2 size={20}/> : <IconMusic size={20}/>}</button>
                                <div className="w-px bg-gray-300 my-1"></div>
                                <button onClick={() => setSfxEnabled(!sfxEnabled)} className={`p-2 rounded-full transition-colors ${sfxEnabled ? 'bg-green-100 text-green-600' : 'bg-gray-200 text-gray-400'}`}>{sfxEnabled ? <IconVolume2 size={20}/> : <IconVolumeX size={20}/>}</button>
                            </div>
                        </div>
                    </div>

                    {/* Main Content: Flex Column */}
                    <div className="flex-1 flex flex-col overflow-hidden relative">
                        
                        {/* Feedback Overlay */}
                        {feedback && (
                            <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-[60] pointer-events-none w-full text-center">
                                <div className={`inline-block px-8 py-4 rounded-3xl shadow-2xl text-2xl md:text-3xl font-black animate-bounce-in border-4 mx-4 ${feedback.type === 'correct' ? 'bg-green-100 text-green-600 border-green-500' : 'bg-red-100 text-red-600 border-red-500'}`}>
                                    {feedback.type === 'correct' ? '‚ú® ' : '‚ùå '} {feedback.msg}
                                </div>
                            </div>
                        )}

                        {/* Top: Baskets (Fixed/Shrinkable area but maintained visibility) */}
                        <div className="shrink-0 bg-transparent p-2 z-10 w-full max-w-6xl mx-auto">
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-2">
                                {CATEGORIES.map((cat) => (
                                    <div key={cat.id} ref={el => basketsRef.current[cat.id] = el} className={`relative flex flex-col items-center justify-start h-32 md:h-48 rounded-2xl border-2 md:border-4 shadow-xl backdrop-blur-sm transition-all overflow-hidden ${cat.color} ${cat.borderColor}`}>
                                        <div className={`w-full text-center py-1 bg-white/40 font-black ${cat.textColor} text-sm md:text-xl truncate px-1`}>
                                            <span className="text-lg md:text-2xl mr-1">{cat.icon}</span>{cat.name}
                                        </div>
                                        {/* Animals inside basket */}
                                        <div className="flex-1 w-full p-1 flex flex-wrap content-start justify-center gap-1 overflow-y-auto custom-scrollbar">
                                            {animals.filter(a => a.category === cat.id && a.completed).map((animal) => (
                                                <img key={animal.id} src={animal.src} alt={animal.name} className="w-8 h-8 md:w-12 md:h-12 object-contain animate-pop-in filter drop-shadow-sm" />
                                            ))}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Bottom: Animals Source (Takes remaining space, Scrollable) */}
                        <div className="flex-1 bg-white/90 backdrop-blur-sm border-t-4 border-blue-200 rounded-t-3xl shadow-[0_-10px_40px_rgba(0,0,0,0.1)] relative overflow-hidden flex flex-col w-full max-w-6xl mx-auto">
                            <div className="shrink-0 py-2 text-center relative z-10 bg-white/50">
                                <span className="inline-block bg-blue-500 px-6 py-1 rounded-full border-4 border-white text-white font-bold text-sm md:text-lg shadow-lg">
                                    ‡∏•‡∏≤‡∏Å‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÑ‡∏õ‡πÉ‡∏™‡πà‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
                                </span>
                            </div>
                            
                            {/* Scrollable Animal Grid */}
                            <div className="flex-1 overflow-y-auto p-4 custom-scrollbar pb-20">
                                <div className="grid grid-cols-4 md:grid-cols-8 gap-3 md:gap-6 justify-items-center content-start">
                                    {remainingAnimals.map((animal) => (
                                        <div key={animal.id} 
                                             onPointerDown={(e) => handlePointerDown(e, animal)} 
                                             onPointerEnter={() => speakName(animal.name)} 
                                             className="cursor-grab active:cursor-grabbing w-16 h-16 md:w-24 md:h-24 p-1 md:p-2 rounded-full bg-white shadow-lg border-2 md:border-4 border-white ring-2 ring-blue-100 hover:scale-110 hover:shadow-2xl hover:ring-blue-400 hover:rotate-6 transition-all touch-none flex items-center justify-center group select-none relative z-10">
                                            <img src={animal.src} alt={animal.name} className="w-full h-full object-contain pointer-events-none select-none" />
                                        </div>
                                    ))}
                                    {remainingAnimals.length === 0 && (
                                        <div className="col-span-full text-gray-400 flex flex-col items-center animate-pulse font-black mt-8">
                                            <IconSparkles size={48} className="text-yellow-400 md:w-16 md:h-16" />
                                            <span className="mt-2 text-xl md:text-2xl text-blue-400">‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î‡πÑ‡∏õ‡πÄ‡∏•‡∏¢!</span>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>

                    </div>

                    {/* Dragged Item Proxy (High Z-Index) */}
                    {draggedItem && (
                        <div className="fixed pointer-events-none z-[100] w-20 h-20 md:w-32 md:h-32 drop-shadow-2xl" 
                             style={{ 
                                 left: dragPosition.x, 
                                 top: dragPosition.y, 
                                 transform: `translate(-${draggedItem.offsetX}px, -${draggedItem.offsetY}px) scale(1.2) rotate(-5deg)` 
                             }}>
                            <img src={draggedItem.src} alt={draggedItem.name} className="w-full h-full object-contain animate-bounce-slow" />
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<CuteAnimalsGame />);
    </script>
</body>
</html>
